//   FunÁ„o para pegar a data-->

var timerID = null;
var timerRunning = false;
var datasys;

function gettheDate() {
	Todays = new Date();

	diasemana = new Array("Domingo","Segunda-Feira","TerÁa-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","S·bado");

	TheDate = diasemana[Todays.getDay()] + ", " + ((Todays.getDate() < 10) ? "0" : "") + Todays.getDate() +"/"+ (Todays.getMonth() + 1) + "/" +  Todays.getYear() 
	datasys = TheDate;		
	//document.getElementById("disp_data_hora").innerHTML = TheDate;			
	//document.clock.date.value = TheDate;
}

//  Final da FunÁ„o -->


function stopclock (){
	if(timerRunning);
		 clearTimeout(timerID);

	timerRunning = false;
}

//  - - - - - - - - Inicializa o Clock-->

function startclock () {
	stopclock();
	gettheDate()
	showtime();
}

//  - - - - - - - -  Mostra a Hora-->

function showtime () {
	var now = new Date();
	var hours = now.getHours();
	var minutes = now.getMinutes();
	var seconds = now.getSeconds()
	var timeValue = "" + ((hours >24) ? hours -12 :hours)
	
	//timeValue += ((hours < 10) ? ":0" : ":") + hours	
	timeValue += ((minutes < 10) ? ":0" : ":") + minutes
	timeValue += ((seconds < 10) ? ":0" : ":") + seconds
	//timeValue += (hours >= 24) ? " P.M." : " A.M."

	document.getElementById("disp_data_hora").innerHTML = datasys+" - "+timeValue;			
	//document.clock.face.value = timeValue;

	// you could replace the above with this and have a clock on the status bar: 	// window.status = timeValue;

	timerID = setTimeout("showtime()",1000);
	timerRunning = true;
}

function Valida_Campos() {
	
	if (document.form.usuario.value=="") {
		alert('Informe o Usu·rio!!!');
		document.form.usuario.focus();
		return
	}		
	
	if (document.form.senha.value=="") {
		alert('Informe a Senha!!!');
		document.form.senha.focus();
		return
	}		
}

function getWidth(){
 return window.innerWidth        ? window.innerWidth                    : /* For non-IE */
        document.documentElement ? document.documentElement.clientWidth : /* IE 6+ (Standards Compilant Mode) */
        document.body            ? document.body.clientWidth            : /* IE 4 Compatible */
        window.screen.width;                                              /* Others (It is not browser window size, but screen size) */
}

function getHeight(){
 return window.innerHeight       ? window.innerHeight                    : /* For non-IE */
        document.documentElement ? document.documentElement.clientHeight : /* IE 6+ (Standards Compilant Mode) */
        document.body            ? document.body.clientHeight            : /* IE 4 Compatible */
        window.screen.height;                                              /* Others (It is not browser window size, but screen size) */
}

function exibeFilialTopo(){
 document.getElementById("div_infoloader").style.left   = ((getWidth() - 10 - document.getElementById("div_infoloader").style.width.replace(/px/g,""))  / 2)+"px";
}

function posiciona_camadas() {

	if (screen.width == "800") {
		document.getElementById("data_hora").style.top = 125;
		document.getElementById("data_hora").style.left = 426;
		}
	else if (screen.width == "1024") {
		document.getElementById("data_hora").style.top = 129;
		document.getElementById("data_hora").style.left = 536;
		}
	else {
		document.getElementById("data_hora").style.top = 129;
		document.getElementById("data_hora").style.left = 610;
	}

}

function click_menu(opcao) {
 document.form1.opcao.value = opcao;
 document.form1.action = "gestao.php";
 document.form1.submit();
}

function criticaNumero( conteudo_txt )
{
// Declara as vari√°veis
var contador_num                   // Contador
var caracter_txt				   // Caracter para an√°lise de conte√∫do

	// Varre a string procurando caracteres que n√£o sejam n√∫meros 
	for( contador_num = 0 ; contador_num < conteudo_txt.length ; contador_num++ ) 	{
		// Analisa apenas o caracter da vez 
		caracter_txt = conteudo_txt.substr( contador_num, 1 );

		// Testa se o caracter √© n√∫mero
		if ( ( caracter_txt != '0' ) && ( caracter_txt != '1' ) && ( caracter_txt != '2' ) &&
		     ( caracter_txt != '3' ) && ( caracter_txt != '4' ) && ( caracter_txt != '5' ) &&
		     ( caracter_txt != '6' ) && ( caracter_txt != '7' ) && ( caracter_txt != '8' ) &&
		     ( caracter_txt != '9' ) && ( caracter_txt != '.' ) && ( caracter_txt != ',' ) )		{
			// Retorna indicando que o conte√∫do n√£o √© num√©rico
			return false;
		}
	}
	// retonra indicando sucesso
	return true;
}

//FUN«√O PARA FORMATAR MOEDA - ADICIONAR A PROPRIEDADE AO CAMPO: onKeyPress=\"return(formataMoeda(this,'.',',',event));\"

function formataMoeda(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;   
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc   

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + aux;

 if (len > 2) {
  aux2 = '';

 for (j = 0, i = len - 3; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;

 for (i = len2 - 1; i >= 0; i--)
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 2, len);
 }
 return false;
}

function formataMoeda2(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;   
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc   

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + aux;

 if (len > 2) {
  aux2 = '';

 for (j = 0, i = len - 3; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;

 for (i = len2 - 1; i >= 0; i--)
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 2, len);
 }
 return false;
}

function formataMoeda3(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;

 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + aux;

 if (len > 3) {
  aux2 = '';

 for (j = 0, i = len - 4; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;
 
 for (i = len2 - 1; i >= 0; i--)
  
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 3, len);
 }
 return false;
}

function formataMoeda4(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '000' + aux;

 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;

 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 4)
  objTextBox.value = '0'+ SeparadorDecimal + aux;

 if (len > 4) {
  aux2 = '';

 for (j = 0, i = len - 5; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;
 
 for (i = len2 - 1; i >= 0; i--)
  
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 4, len);
 }
 return false;
}


function formataMoeda5(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '0000' + aux;
 
 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + '000' + aux;
 
 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;
 
 if (len == 4)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 5)
  objTextBox.value = '0'+ SeparadorDecimal + aux;
 
 if (len > 5) {
  aux2 = '';

 for (j = 0, i = len - 6; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;
 
 for (i = len2 - 1; i >= 0; i--)
  
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 5, len);
 }
 return false;
}

function formataMoeda6(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '00000' + aux;
 
 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + '0000' + aux;
 
 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + '000' + aux;
 
 if (len == 4)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;
 
 if (len == 5)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 6)
  objTextBox.value = '0'+ SeparadorDecimal + aux;
 
 if (len > 6) {
  aux2 = '';

 for (j = 0, i = len - 7; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;
 
 for (i = len2 - 1; i >= 0; i--)
  
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 6, len);
 }
 return false;
}

function formataMoeda7(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '000000' + aux;
 
 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + '00000' + aux;
 
 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + '0000' + aux;
 
 if (len == 4)
  objTextBox.value = '0'+ SeparadorDecimal + '000' + aux;
 
 if (len == 5)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;
 
 if (len == 6)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 7)
  objTextBox.value = '0'+ SeparadorDecimal + aux;
 
 if (len > 7) {
  aux2 = '';

 for (j = 0, i = len - 8; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;
 
 for (i = len2 - 1; i >= 0; i--)
  
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 7, len);
 }
 return false;
}

function formataMoeda8(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '0000000' + aux;

 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + '000000' + aux;
 
 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + '00000' + aux;
 
 if (len == 4)
  objTextBox.value = '0'+ SeparadorDecimal + '0000' + aux;
 
 if (len == 5)
  objTextBox.value = '0'+ SeparadorDecimal + '000' + aux;
 
 if (len == 6)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;
 
 if (len == 7)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 8)
  objTextBox.value = '0'+ SeparadorDecimal + aux;
 
 if (len > 8) {
  aux2 = '';

 for (j = 0, i = len - 9; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;
 
 for (i = len2 - 1; i >= 0; i--)
  
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 8, len);
 }
 return false;
}

function formataMoeda9(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '00000000' + aux;

 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + '0000000' + aux;

 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + '000000' + aux;
 
 if (len == 4)
  objTextBox.value = '0'+ SeparadorDecimal + '00000' + aux;
 
 if (len == 5)
  objTextBox.value = '0'+ SeparadorDecimal + '0000' + aux;
 
 if (len == 6)
  objTextBox.value = '0'+ SeparadorDecimal + '000' + aux;
 
 if (len == 7)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;
 
 if (len == 8)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 9)
  objTextBox.value = '0'+ SeparadorDecimal + aux;
 
 if (len > 9) {
  aux2 = '';

 for (j = 0, i = len - 10; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;
 
 for (i = len2 - 1; i >= 0; i--)
  
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 9, len);
 }
 return false;
}


function formataMoeda10(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '000000000' + aux;

 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal + '00000000' + aux;

 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + '0000000' + aux;
 
 if (len == 4)
  objTextBox.value = '0'+ SeparadorDecimal + '000000' + aux;
 
 if (len == 5)
  objTextBox.value = '0'+ SeparadorDecimal + '00000' + aux;
 
 if (len == 6)
  objTextBox.value = '0'+ SeparadorDecimal + '0000' + aux;
 
 if (len == 7)
  objTextBox.value = '0'+ SeparadorDecimal + '000' + aux;
 
 if (len == 8)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;
 
 if (len == 9)
  objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;

 if (len == 10)
  objTextBox.value = '0'+ SeparadorDecimal + aux;

 if (len > 10) {
  aux2 = '';

 for (j = 0, i = len - 11; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;
 
 for (i = len2 - 1; i >= 0; i--)
  
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 10, len);
 }
 return false;
}



function formataQuantidade2(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;   
 if (e.target.selectionEnd != e.target.selectionStart) {
  objTextBox.value = objTextBox.value.slice(0,2) + objTextBox.value.slice(4, n.length)
 }
 // 13=enter, 8=backspace as demais retornam 0(zero)

 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc   

 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
  return true;

 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave

 if (strCheck.indexOf(key) == -1)
  return false; // Chave inv·lida

 len = objTextBox.value.length;

 for(i = 0; i < len; i++)

 if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal))
  break;

 aux = '';

 for(; i < len; i++)

  if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1)
   aux += objTextBox.value.charAt(i);

 aux += key;
 len = aux.length;

 if (len == 0)
  objTextBox.value = '';

 if (len == 1)
  objTextBox.value = '0'+ SeparadorDecimal + '00' + aux;

 if (len == 2)
  objTextBox.value = '0'+ SeparadorDecimal  + '0' + aux;
  
 if (len == 3)
  objTextBox.value = '0'+ SeparadorDecimal + aux;


 if (len > 2) {
  aux2 = '';

 for (j = 0, i = len - 3; i >= 0; i--) {

  if (j == 3) {
   aux2 += SeparadorMilesimo;
   j = 0;
  }
  aux2 += aux.charAt(i);
  j++;
 }

 objTextBox.value = '';
 len2 = aux2.length;

 for (i = len2-1; i >= 0; i--)
  objTextBox.value += aux2.charAt(i);
  objTextBox.value += SeparadorDecimal + aux.substr(len - 3, len);
 }
 return false;
}

function formataQuantidade(campo) {
 var digits="0123456789,";
 var campo_temp;
 for (var i=0;i<campo.value.length;i++){
  campo_temp=campo.value.substring(i,i+1)    
  if (digits.indexOf(campo_temp)==-1){
   campo.value = campo.value.substring(0,i);
   break;
  }
 }
}
function SomenteNumeros(campo){
 var digits="0123456789";
 var campo_temp;
 for (var i=0;i<campo.value.length;i++){
  campo_temp=campo.value.substring(i,i+1)    
  if (digits.indexOf(campo_temp)==-1){
   campo.value = campo.value.substring(0,i);
   break;
  }
 }
}

/*function formataMoeda(objTextBox, SeparadorMilesimo, SeparadorDecimal, e){
 var sep = 0;
 var key = '';
 var i = j = 0;
 var len = len2 = 0;
 var strCheck = '0123456789';
 var aux = aux2 = '';
 var whichCode = (window.Event) ? e.which : e.keyCode;    
 // 13=enter, 8=backspace as demais retornam 0(zero)
 // whichCode==0 faz com que seja possivel usar todas as teclas como delete, setas, etc    
 if ((whichCode == 13) || (whichCode == 0) || (whichCode == 8))
 	return true;
 key = String.fromCharCode(whichCode); // Valor para o cÛdigo da Chave


 if (strCheck.indexOf(key) == -1) 
 	return false; // Chave inv·lida
 len = objTextBox.value.length;
 for(i = 0; i < len; i++)
     if ((objTextBox.value.charAt(i) != '0') && (objTextBox.value.charAt(i) != SeparadorDecimal)) 
     	break;
 aux = '';
 for(; i < len; i++)
     if (strCheck.indexOf(objTextBox.value.charAt(i))!=-1) 
     	aux += objTextBox.value.charAt(i);
 aux += key;
 len = aux.length;
 if (len == 0) 
 	objTextBox.value = '';
 if (len == 1) 
 	objTextBox.value = '0'+ SeparadorDecimal + '0' + aux;
 if (len == 2) 
 	objTextBox.value = '0'+ SeparadorDecimal + aux;
 if (len > 2) {
     aux2 = '';
     for (j = 0, i = len - 3; i >= 0; i--) {
         if (j == 3) {
             aux2 += SeparadorMilesimo;
             j = 0;
         }
         aux2 += aux.charAt(i);
         j++;
     }
     objTextBox.value = '';
     len2 = aux2.length;
     for (i = len2 - 1; i >= 0; i--)
     	objTextBox.value += aux2.charAt(i);
     objTextBox.value += SeparadorDecimal + aux.substr(len - 2, len);
 }
 return false;
}*/

function atalhos(){
	shortcut.add("F10",function() {
		window.print();
	});

	shortcut.add("F8",function() {
		history.back(-1);
	});	
	
	shortcut.add("F1",function() {
		var pagina = "../sistema/sge_help.php";
	
		win=window.open(pagina,"","width=800,height=500,scrollbars=yes")
		text = "Se a janela nao est· abrindo\ntalvez seja porque voce tenha um\nprograma bloqueador de pop-up!\nObservacao ª O windows XP service pack 2\nbloqueia pop-ups!";
		if(win == null) {alert(text);return;}
	});
	
	shortcut.add("F7",function() {
		document.getElementById('info').style.display='block';
	});
	
	shortcut.add("CTRL+SHIFT+F",function() {
		var pagina = "../sistema/fluxograma.php";
	
		win=window.open(pagina,"","width=800,height=500,scrollbars=yes")
		text = "Se a janela nao est· abrindo\ntalvez seja porque voce tenha um\nprograma bloqueador de pop-up!\nObservacao ª O windows XP service pack 2\nbloqueia pop-ups!";
		if(win == null) {alert(text);return;}
	});
}

function criaXMLHttp() {
	if (typeof XMLHttpRequest != "undefined")
		return new XMLHttpRequest();
	else 
	 if (window.ActiveXObject) {
			var versoes = ["MSXML2.XMLHttp.5.0", "MSXML2.XMLHttp.4.0", "MSXML2.XMLHttp.3.0", "MSXML2.XMLHttp", "Microsoft.XMLHttp"];
		}

		for (var i = 0; i < versoes.length; i++) {
			try
			{
				return new ActiveXObject(versoes[i]);
			}	catch (e) {
			}
		}
		throw new Error();
}

function LoadCombobox(div,link,campo) {
 var indice = eval("document.getElementById('"+campo+"').selectedIndex");
 var tipo   = eval("document.getElementById('"+campo+"').options[indice].value");

 if(tipo == "")	{		
 	}
 else {
	 var url = link;
 }
	
 var divInfo = eval("document.getElementById('"+div+"')");
 var XMLHttp = criaXMLHttp();
 XMLHttp.open("get", url, true);
 divInfo.innerHTML = carregando();

 XMLHttp.onreadystatechange = function () {
	if (XMLHttp.readyState == 4)
		if (XMLHttp.status == 200) 	{  
			divInfo.innerHTML = XMLHttp.responseText;
		} 
	else 	{
			divInfo.innerHTML = "N„o foi possÌvel encontrar \""+link+"\".";
	}
};

XMLHttp.setRequestHeader( "Content-Type","text/html; charset=iso-8859-1" );  
XMLHttp.send(null);
}

function LoadPage(div,link) {
	var url = link;
	var divInfo = eval("document.getElementById('"+div+"')");
 
 var XMLHttp = criaXMLHttp();
 XMLHttp.open("get", url, true);
 divInfo.innerHTML = carregando();

 XMLHttp.onreadystatechange = function () {
	if (XMLHttp.readyState == 4)
		if (XMLHttp.status == 200) 	{  
			divInfo.innerHTML = XMLHttp.responseText;
		} 
	else 	{
			divInfo.innerHTML = "N„o foi possÌvel encontrar \""+link+"\".";
	}
};

XMLHttp.setRequestHeader( "Content-Type","text/html; charset=ISO-8859-1" );  
XMLHttp.send(null);
}

function carregando() {
 var msg = "<img src='../imagens/aguarde.gif' width='12' height='12'>&nbsp;<span class='style23'>Carregando ...</span>";
 return msg;
}


function LoadPagePost(form,pagina,div){
	var sBody = criaReqStr(document[form]);

	var oXMLHttp = criaXMLHttp();
	// 1o arg: usa o mÈtodo post
	// 2o arg: envia a requisiÁ„o post a p·gina do formul·rio
	// 3o arg: usa o modo assincrono
	oXMLHttp.open("post", pagina, true);
	// importante.. a maioria das linguagens server-side verifica 
	// essa codificaÁ„o para o parsing da informaÁ„o
	oXMLHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

	oXMLHttp.onreadystatechange = function (){
		// readyState == 4 quer dizer Completo e sem erros
		if(oXMLHttp.readyState == 4){
			exibeResult(div,oXMLHttp.responseText); // PASSO O NOME DA DIV, E A RESPOSTA DO PROCESSAMENTO DA P¡GINA
		}
		else if(oXMLHttp.readyState == 2 || oXMLHttp.readyState == 1 || oXMLHttp.readyState == 0){
		 exibeResult(div,carregando());
		}
		else if(oXMLHttp.readyState == 5){
			exibeResult(div,"Ocorreu um erro: " + oXMLHttp.statusText);
			exibeResult(div,oXMLHttp.readyState);
		}
	};
	// depois de ser setado todos os parametros
	// È enviado os valores usando o mÈtodo post
	oXMLHttp.send(sBody);
}

function criaReqStr(oForm){
	var aPostStr = new Array();

	for(var i = 0; i < oForm.elements.length; i++){
		var sValor = encodeURIComponent(oForm.elements[i].name);
		sValor += "=";
		sValor += encodeURIComponent(oForm.elements[i].value);
		aPostStr.push(sValor);
	}
	// retorna uma string no padr„o "post request":
	// nome1=valor1&nome2=valor2&...&nomeN=valorN
	return aPostStr.join("&");
}  

function exibeResult(div,sTxt){
	var divStatus = document.getElementById(div);
	divStatus.innerHTML = sTxt;
}

function LerCookie(strCookie){
 var strNomeIgual = strCookie + "=";
 var arrCookies = document.cookie.split(';');

 for(var i = 0; i < arrCookies.length; i++){
  var strValorCookie = arrCookies[i];
  
  while(strValorCookie.charAt(0) == ' '){
   strValorCookie = strValorCookie.substring(1, strValorCookie.length);
  }
  if(strValorCookie.indexOf(strNomeIgual) == 0){
   return strValorCookie.substring(strNomeIgual.length, strValorCookie.length);
  }
 }
 return null;
}

function GerarCookie(strCookie, strValor, lngDias){
 var dtmData = new Date();

 if(lngDias){
  dtmData.setTime(dtmData.getTime() + (lngDias * 24 * 60 * 60 * 1000));
  var strExpires = "; expires=" + dtmData.toGMTString();
 }
 else{
  var strExpires = "";
 }
 document.cookie = strCookie + "=" + strValor + strExpires + "; path=/";
}

function ExcluirCookie(strCookie){
 GerarCookie(strCookie, '', -1);
}

function bloqueia_campos(){
 input    = document.getElementsByTagName('input');
 textarea = document.getElementsByTagName('textarea');
 select   = document.getElementsByTagName('select');
 button   = document.getElementsByTagName('button');
	trs      = document.getElementsByTagName('tr');
	imgs     = document.getElementsByTagName('img');
	
	//INPUTS
 for(i=0;i<input.length;i++){
 	var cpo  = input[i]; 
  
		cpo.value = "";
	 cpo.selected = "false";
	 cpo.checked  = "false";
		 
		cpo.disabled = "true";  
 }
 
 //TEXTAREA
 for(i=0;i<textarea.length;i++){
 	textarea[i].disabled='true';
  textarea[i].value='';
 }
 
 //SELECT
 for(i=0;i<select.length;i++){
 	select[i].options[0].selected = true;
  select[i].disabled='true';
 }
 
 //BUTTONS
 var i=0;
 for(i=0;i<button.length;i++){
  button[i].disabled='true';
 }
 
 //TD'S
	for (var i=0; i<trs.length; i++){
  var tr      = trs[i];
  var onclick = tr.getAttribute('onclick');
  tr.onclick  = "";
  
  var style   = tr.getAttribute('style');
  tr.style.cursor = "default";
	}
	
	//IMAGENS
	for (var i=0; i<imgs.length; i++){		
  var img = imgs[i];
  var src = img.getAttribute('src');
  var vlr = img.src.split("/");
  
  //alert(src);
  
  for(k=0;k<vlr.length;k++){
	  if(vlr[k]=="-.gif" || vlr[k]=="+.gif" || vlr[k]=="go.gif" || vlr[k]=="up.gif" || vlr[k]=="xis.gif" || vlr[k]=="btn_tmkt_consultapreco.gif"){
	  	//alert(vlr[k]);	  	
	  	
		  var onclick = img.getAttribute('onclick');
		  img.onclick = "";
		  
		  var style = img.getAttribute('style');
		  img.style.cursor = "default";
	  }
  }
	}
}

function ObtemCep(cep,campos){
	var i;
	
	if(cep.value.length!=8){
		alert("Cep inv·lido");
		return;
	}
	
	arr = campos.split(",");
	
	nome   = arr[0];
	bairro = arr[1];
	cidade = arr[2];
	uf     = arr[3];
	
	valor = cep.value;
	
	url = "../tmkt/includes/obtem_cep.php?cep="+valor;
	LoadPage('obtem_cep',url);
	
	setTimeout("document.forms[0]."+nome+".value   = document.forms[0].LOGRADOURO_LGD.value",1000);
	setTimeout("document.forms[0]."+bairro+".value = document.forms[0].NOME_BAI .value",     1000);
	setTimeout("document.forms[0]."+cidade+".value = document.forms[0].NOME_CID.value",      1000);
	setTimeout("document.forms[0]."+uf+".value     = document.forms[0].PK_CODIGO_ETD .value",1000);
	
}

function PermiteNumeros(e) {
	
	if (window.event) { 			//Se for Internet Explorer
 	 tecla = e.keyCode;
 	}
 else if (e.which) { 			//Se for Firefox
 	 tecla = e.which;
 	}

// KeyCode dos numeros (0 a 9) no teclado alfabÈtico -> de 48 a 57  
// KeyCode dos numeros (0 a 9) no teclado numerico   -> de 96 a 105
//	KeyCode do backspace -> 8
    
 if ( (tecla >= 48 && tecla <= 57	)	||
						(tecla == 8 																)	||
						(tecla >= 96	&& tecla <= 105) 		) {
 	 return true;
 	}
 else	{
  	return false;
 	}
 
}

function sleep(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
      break;
    }
  }
}

function strrchr (haystack, needle) {
 var pos = 0;

 if (typeof needle !== 'string') {
  needle = String.fromCharCode(parseInt(needle, 10));
 }
 needle = needle.charAt(0);
 pos = haystack.lastIndexOf(needle);

 if (pos === -1) {
  return false;
 }

 return haystack.substr(pos);
}

//atividade 1=>COMPRA, 2=>VENDA

function ValidaCFOP(atividade,ufDestino,ufRemetente, CFOP, div, pasta)
{
 if(parseInt(atividade) == 1)
 {
  if(ufDestino == ufRemetente && CFOP.substr(0,1) == 1)
    LoadPage(div, pasta+"/valida_cfop.php?CFOP="+CFOP);
  else if(ufDestino != ufRemetente && CFOP.substr(0,1) == 2)
    LoadPage(div, pasta+"/valida_cfop.php?CFOP="+CFOP);
  else
  {
    alert("CFOP inv·lido para esta operaÁ„o!");
    return false;
  }
 }
 else if(parseInt(atividade) == 2)
 {
  LoadPage(div, pasta+"/valida_cfop.php?CFOP="+CFOP);
 }
 else
 {
  alert("Atividade inv·lida!");
  return false;
 }
}

function AlertaCFOP()
{
 alert("CFOP inexistente!");
 return false;
}

function InserirItem()
{
 document.forms[0].acao.value = "I";
 document.forms[0].submit();
}

function posicionarNotificacao(id){
	div = document.getElementById("ntf"+id);
	
	div.style.left = ((document.documentElement.clientWidth - 15 - div.style.width.replace(/px/g,""))  / 2)+"px";
 div.style.top  = ((document.documentElement.clientHeight - div.style.height.replace(/px/g,"")) / 2)+"px";

 div.style.visibility = "visible";
}
function trim(str){
 return str.replace(/^\s+|\s+$/g,"");
}

Array.prototype.in_array = function(p_val) {
	for(var i = 0, l = this.length; i < l; i++) {
		if(this[i] == p_val) {
			return true;
		}
	}
	return false;
}

function strPad(palavra, casas, carac, dir) { 
 //dir = 'R' => Right; dir = 'L' => Left; 
 if(palavra == null || palavra == '') palavra = 0; 
 var ret = ''; 
 var nro = casas - (palavra.length); 
 for(var i = 0; i < nro; i++) ret += carac; 
 if(dir == 'R') 
   ret = palavra + ret; 
 else if(dir == 'L') 
   ret += palavra; 
 return ret; 
}

function mascaraCPF(campo){
 var cpf  = "";
 var cpf2 = campo.value;
 while (cpf2.indexOf(".") > -1){
  cpf2 = cpf2.replace(".","");
 }

 while (cpf2.indexOf("-") > -1){
  cpf2 = cpf2.replace("-","");
 }
 
 for (var i=0; i<cpf2.length; i++){
  if (i == 3 || i == 6 ){
   cpf += ".";
  }
  else if (i == 9){
   cpf += "-";
  }
  //else
   cpf += cpf2.charAt(i);
  }
 //document.write(cpf);
campo.value = cpf;
}

function mascaraCNPJ(campo){
 var cnpj  = "";
 var cnpj2 = campo.value;

 while (cnpj2.indexOf(".") > -1){
  cnpj2 = cnpj2.replace(".","");
 }

 while (cnpj2.indexOf("-") > -1){
  cnpj2 = cnpj2.replace("-","");
 }

 while (cnpj2.indexOf("/") > -1){
  cnpj2 = cnpj2.replace("/","");
 }

 for (var i=0; i<cnpj2.length; i++){
  if (i==2 || i== 5)
   cnpj += ".";
  else if (i==8)
   cnpj += "/";
  else if (i==12)
   cnpj += "-";

  cnpj += cnpj2.charAt(i);
 }
 campo.value = cnpj;
}

function checkAll(nOpcs,nome){
 a = 0;
 for(i=0; i<document.forms[0].elements.length; i++){
  if(document.forms[0].elements[i].getAttribute("name").substr(0,nome.length) == nome){
   if(document.forms[0].elements[i].checked == true)
    a = parseInt(a)+1;
   document.forms[0].elements[i].checked = true;
   $(document.forms[0].elements[i]).trigger('change')
  }
 }
 if(a == nOpcs){
  for(i=0; i<document.forms[0].elements.length; i++){
   if(document.forms[0].elements[i].getAttribute("name").substr(0,nome.length) == nome){
    document.forms[0].elements[i].checked = false;
    $(document.forms[0].elements[i]).trigger('change')
   }
  }
 }
}


 function completaMesAno(campo){
  qtdcaracteres = (campo.value).length;

  if(qtdcaracteres == 2)
   campo.value = campo.value + "/20";
 }
 function TrataVariavel_Float(valor){
  variavel = parseFloat(valor);
  if (isNaN(variavel)){
   variavel = 0;
   valor = "0,00";
  }
  return variavel;
 }

 function MascaraCPFCNPJ(campo){
  var tam = 0;
  
  while (campo.indexOf(".") > -1)
   campo = campo.replace(".", "");

  while (campo.indexOf("-") > -1)
   campo = campo.replace("-","");

  while (campo.indexOf("/") > -1)
   campo = campo.replace("/","");
   
  tam = campo.length;
  if (tam == 11){
   campo = campo.substr(0,3)+"."+campo.substr(3,3)+"."+campo.substr(6,3)+"-"+campo.substr(9,2);
   return campo;
  }
  else if (tam == 14){
   campo = campo.substr(0,2)+"."+campo.substr(2,3)+"."+campo.substr(5,3)+"/"+campo.substr(8,4)+"-"+campo.substr(12,2);
   return campo;
  }
  else
   return campo;

 }

 function checkMail(mail){
  var er = new RegExp(/^[A-Za-z0-9_\-\.]+@[A-Za-z0-9_\-\.]{2,}\.[A-Za-z0-9]{2,}(\.[A-Za-z0-9])?/);

  if(typeof(mail) == "string"){
   if(er.test(mail)){ return true; }
  }
  else if(typeof(mail) == "object"){
   if(er.test(mail.value)){
    return true;
   }
  }
  else{
   return false;
  }
 }

 function strstr(haystack,needle,bool){
  // Finds first occurrence of a string within another
  //
  // version: 1009.2513
  // discuss at: http://phpjs.org/functions/strstr
  // +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
  // +   bugfixed by: Onno Marsman
  // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
  // *     example 1: strstr('Kevin van Zonneveld', 'van');
  // *     returns 1: 'van Zonneveld'
  // *     example 2: strstr('Kevin van Zonneveld', 'van', true);
  // *     returns 2: 'Kevin '
  // *     example 3: strstr('name@example.com', '@');
  // *     returns 3: '@example.com'
  // *     example 4: strstr('name@example.com', '@', true);
  // *     returns 4: 'name'
  var pos = 0;

  haystack += '';
  pos = haystack.indexOf(needle);

  if(pos == -1)
   return false;
  else
   if(bool)
    return haystack.substr(0,pos);
   else
    return haystack.slice(pos);
 }

 function ValorMinimoNF(its_codigo,ind){
  ind2 = parseInt(ind) - 1;
  
  var ckvalor_minimo;
  var Its_Vr_Contabil;
  var Its_Quantidade;
  var ValorMinimo;

  if (document.getElementById("ckvalor_minimo"+ind2))
   ckvalor_minimo  = document.getElementById("ckvalor_minimo"+ind2).value;

  if (document.getElementById("Its_Vr_Contabil"+ind2))
   Its_Vr_Contabil = document.getElementById("Its_Vr_Contabil"+ind2).value;

  if (document.getElementById("Its_Quantidade"+ind2))
   Its_Quantidade  = document.getElementById("Its_Quantidade"+ind2).value;

  if (document.getElementById("ValorMinimo"+ind2))
   ValorMinimo     = document.getElementById("ValorMinimo"+ind2).value;
  
  if (ckvalor_minimo == "1"){  
   vr_unitario = TrataVariavel_Float(tira_edicao_cpo(Its_Vr_Contabil)) / TrataVariavel_Float(Its_Quantidade);
   if (ValorMinimo > vr_unitario){
    alert("Erro ao inserir produto!\nProduto abaixo do valor mÌnimo!");
    return false;
   } else {
    AlterarItem(its_codigo, ind);
    return true;
   }
  }
  else
   AlterarItem(its_codigo, ind);
  return true;
}

 function open_req(referencia, form) {
  win=window.open("relacao_tmkt_requerimento_pesq.php?referencia="+referencia+"&form="+form,"","width=800,height=500,scrollbars=yes")
  text = "Se a janela nao est· abrindo\ntalvez seja porque voce tenha um\nprograma bloqueador de pop-up!\nObservacao ª O windows XP service pack 2\nbloqueia pop-ups!";
  if(win == null) { alert(text); return; }
 }

 Array.prototype.in_array = function(p_val) {
  for (var i=0, l=this.length; i<l; i++) {
   if (this[i] == p_val) {
    return true;
   }
  }
  
  return false;
 }

 String.prototype.replaceAll = function(de, para){
  var str = this;
  var pos = str.indexOf(de);

  while (pos > -1) {
   str = str.replace(de, para);
   pos = str.indexOf(de);
  }

  return (str);
 }

 getValorRadio = function(nomeInput) {
     var valor = null;
     $("input[name="+nomeInput+"]").each(function() {
         if ($(this).is(":checked")) {
             valor = $(this).val();
         }
     });

     return valor;
 }

 getPosicaoElemento = function(idElemento) {
     return $("#"+idElemento).position();
 }

 getPosicaoLeft = function(idElemento) {
     return getPosicaoElemento(idElemento).left;
 }

 getPosicaoTop = function(idElemento) {
     return getPosicaoElemento(idElemento).top;
 }

 inserirDatePickerElemento = function(elemento) {
    var posicao = getPosicaoElemento($(elemento).attr("id"));
    $(elemento).attr("onkeyup", "completaData(this);");
    $(elemento).attr("onclick", "event.cancelBubble = true;this.select();inserirDatePickerElemento(this);");
    $(elemento).attr("onfocus", "this.select();lcs(this);document.getElementById('fc').style.marginLeft = " + posicao.left + "px;document.getElementById('fc').style.top = "+ (posicao.top - 10) + 'px;');
 }

 function ehUmNumero(numero) {
     return !isNaN(numero);
 }

function dataEhValida(dataInformada) {
    const arrData = dataInformada.split("/") || [];

    if (arrData.length != 3 || !arrData.every(ehUmNumero)) {
        return false;
    }

    return ehUmNumero(new Date([arrData[2], arrData[1], arrData[0]].join("-")).getTime());
}

function horaEhValida(hora) {
    var arrHora = hora.split(':');


    return (/^\d\d:\d\d:\d\d$/.test(hora) ||  /^\d\d:\d\d$/.test(hora)) &&
        arrHora[0] >= 0 && arrHora[0] < 25 &&
        arrHora[1] >= 0 && arrHora[1] < 60 &&
        (arrHora.length == 3 && arrHora[2] >= 0 && arrHora[2] < 60 || arrHora.length == 2);
}

function mascaraHora(campo) {

     var hora           = campo.value.split(":").join("");
     var tamanhoString  = hora.length;
     var maxlength      = parseInt(campo.getAttribute('maxlength'), 10);
     var minutoSegundo  = (tamanhoString == 4 && maxlength > 5 || maxlength == 0)
     console.log(maxlength, minutoSegundo, campo.getAttribute('maxlength'));

     if (tamanhoString == 2 || minutoSegundo) {
         campo.value = hora.substr(0, 2) + ":" + hora.substr(2,2);

         if (minutoSegundo && tamanhoString == 4) {
             campo.value = campo.value + ":" + hora.substr(4, 2);
         }
     }

     return campo.value;
}
